# USER ACCOUNTS MANAGEMENT

User management in Linux involves the creation, modification, and removal of user accounts, as well as the management of associated permissions and privileges. It is a crucial aspect of system administration, ensuring secure and efficient access to resources on the system.
The two main folders involved in user management are `/etc/passwd` and `/etc/shadow`. Here are some key notes on user management in Linux:

`/etc/passwd`:

This file contains essential information about each user account on the system. Each line represents a user account and is composed of several fields separated by colons (:). Fields include username, password placeholder (actual password hash stored in /etc/shadow), UID, GID, user's full name or description, home directory, and login shell.

Example: `backup:x:34:34:backup:/var/backups:/usr/sbin/nologin`
- `backup`: This is the username of the user.
- `x`: This field traditionally held the hashed password of the user. However, modern systems typically store the password hashes in the - /etc/shadow file for security reasons. The x here indicates that the password hash is stored in the /etc/shadow file.
- `34`: This is the numerical user ID (UID) of the user. It uniquely identifies the user within the system.
- `34`: This is the numerical group ID (GID) of the user's primary group. It specifies which group the user belongs to.
- `backup`: This is the user's full name or a description of the user account.
- `/usr/sbin/nologin`: This is the user's shell. It specifies the command or program that will be executed when the user logs in. In this case, `/usr/sbin/nologin` indicates that the user cannot log in interactively, as it is a special shell that displays a message indicating that the account is not available for login.

`/etc/shadow`:

This file stores user account passwords in an encrypted format, enhancing security by protecting password information. Each line represents a user account and is composed of several fields separated by colons (:). Fields include username, encrypted password, password change and expiration information, and other account-related settings. The password field typically contains a hash generated using a hashing algorithm, along with a salt for added security.

Example: `seun:$y$j9T$aByJlLDW1APOvddbxH0oC1$aUSViRiZM.iy8qnvsJviLk78cfXh40p1YzGh5LTnyO8:19733:0:99999:7:::`
- `seun`: This is the username of the user.
- `$y$`: This field indicates the type of hashing algorithm used to generate the hash. In this case, $y$ typically represents bcrypt hashing.
- `j9T$aByJlLDW1APOvddbxH0oC1`: This is the hash value generated by the bcrypt hashing algorithm. It represents the hashed password.
- `aUSViRiZM.iy8qnvsJviLk78cfXh40p1YzGh5LTnyO8`: This appears to be the salt value used during the hashing process. The salt is combined with the password before hashing to add randomness and strengthen security.
- `19733:` This field represents the number of days since the Unix epoch (January 1, 1970) when the password was last changed.
- `0:` This field represents the minimum number of days required between password changes.
- `99999:` This field represents the maximum number of days the password is valid before it must be changed.
- `7:` This field represents the number of days before a password change is required for a warning to be issued.
- `::::` These fields represent various optional fields, such as the password expiration date and account locking status.
- `$6$` indicates the type of hashing algorithm used (e.g., SHA-512).

### HASH PASSWORD FORMAT EXPLAINED

In Linux and many other systems, passwords are stored in a hashed format for security reasons. The format `$type$salt$hash` is commonly used to represent hashed passwords.

- $type: Indicates the type of hashing algorithm used to generate the hash. This part of the format specifies the algorithm used for password encryption. Different hash algorithms have different identifiers. For example: </br>
  - 1 typically represents MD5 hashing.</br>
  - 2a (blowfish) or 2y (Eksblowfish) typically represents bcrypt hashing.</br>
  - 5 typically represents SHA-256 hashing.</br>
  - 6 typically represents SHA-512 hashing.

<img width="526" alt="2y - Eksblowfish" src="https://github.com/ikechukwu25/Mastering-Linux/assets/64879420/98da424c-af14-47b4-a8ac-576504ff3898">

- $salt: The salt value used during the hashing process. A salt is a randomly generated string of characters that is combined with the password before hashing. Salting adds randomness to the hashing process and helps protect against dictionary and rainbow table attacks.

- $hash: The resulting hash value obtained after applying the hashing algorithm to the password concatenated with the salt. This value represents the final hashed password, which is stored in the system for authentication purposes.

Knowledge of hashing algorithms and salts aids in evaluating the security of password storage practices and implementing appropriate measures to protect sensitive user credentials.

We'll use the previous has in the shadow file as an example; 

`$y$j9T$aByJlLDW1APOvddbxH0oC1$aUSViRiZM.iy8qnvsJviLk78cfXh40p1YzGh5LTnyO8`
- $type: `$y$` indicates bcrypt hashing.
- $salt: `j9T` is the salt value used.
- $hash: `aByJlLDW1APOvddbxH0oC1` is the resulting hash of the password concatenated with the salt.
- `iy8qnvsJviLk78cfXh40p1YzGh5LTnyO8`: This is the final hash value obtained after applying the bcrypt hashing algorithm, representing the hashed password. It is the output of the password hashing process and is stored in the system for authentication purposes.


